#第二章 程序结构

## 变量
- 变量声明
```go
    var temp string = "hello word"
    var temp string // 省略表达式
    var temp = "hello word" // 省略类型
    temp := "hello word" // 简短申明 适用于局部变量 :=是一个变量声明语句
```

- 指针  
指针的值为一个变量在内存中的地址。go语言在函数中返回局部变量的地址是安全的，但是每次返回的值都将不一样
```go
    func fun() *int {
    	a := 2
    	return &a
    }
    
    func main() {
    	println(fun(), fun())
    }
```

- new 函数  
new(T)将创建一个类型为T的匿名变量，返回*T的指针。本质上和局部变量没有区别，除了不需要单独申明一个变量。new属于一个预定义的函数，不是关键字。

- 生命周期  
生命周期是指变量在程序运行期间的存活的时间。包一级的变量的生命周期和整个应用程序保持一致，局部变量则是动态的，垃圾回收器检测到没有引用之后将回收，到达其生命周期。

```go
    var gloabal *int
    
    func f() {
        a := 1
        p := &a
        gloabal = &a // 变量a从函数f中逃逸，生命周期在整个程序期间
}
```
## 赋值

- 元组赋值  
允许多个变量同时更新值，赋值之前，先对右边的表达式求值，然后再统一更新左边对应变量的值。

```go
    x,y = y,x
    a[i],a[j] = a[j],a[i]
    f,err = os.Open("foo.txt")
```

## 类型

- 类型声明语句创建了一个新的类型，和现有类型拥有相同的底层结构。  
- 类型声明一般在包一级，因此如果是首字母大写，则可以导出供其他包使用  
- 对类型T，提供T()进行强制转化，前提是底层结构一致
```go
type Age int    // 声明了一个底层结构为int的类型，表征年龄
```

## 包和文件